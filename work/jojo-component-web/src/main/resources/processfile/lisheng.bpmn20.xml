<?xml version="1.0" encoding="UTF-8"?>
<definitions id="definitions" targetNamespace="http://activiti.org/bpmn20" xmlns:activiti="http://activiti.org/bpmn"
	xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL">

	<!-- id：这个属性是必须的， 它对应着Activiti ProcessDefinition对象的key属性。 ‘id可以用来启动流程定义的流程实例， 通过RuntimeService的startProcessInstanceByKey方法。
		这个方法会一直使用最新发布版本的流程定义(译者注：实际中一般都使用这种方式启动流程) -->
	<process id="lishengProcess1" name="Material management process">

		<startEvent id="theStart" />

		<!-- 启动流程，进入轮机长申请船舶备件Task -->
		<sequenceFlow id='startFlow' sourceRef='theStart' targetRef='applyShipSparePartsTask' />

		<!-- 轮机长申请船舶备件 -->
		<userTask id="applyShipSparePartsTask" name="apply for ship spare parts">
			<documentation>
				The chief engineer will apply for ship spare parts.
			</documentation>
			<extensionElements>
				<activiti:taskListener event="assignment"
					class="com.jojo.service.process.usertask.listener.TaskAssignmentHandler" />
			</extensionElements>
		</userTask>

		<!-- 分派给管理公司主管审核 -->
		<sequenceFlow id='assgin2MgtCompanyDirector' sourceRef='applyShipSparePartsTask' targetRef='checkShipSparePartsTask' />

		<!-- 管理公司主管审核船舶备件的申请 -->
		<userTask id="checkShipSparePartsTask" name="check for ship spare parts">
			<documentation>
				The Management Company Director will check for ship spare parts.
			</documentation>
			<extensionElements>
				<activiti:taskListener event="assignment"
					class="com.jojo.service.process.usertask.listener.TaskAssignmentHandler" />
			</extensionElements>
		</userTask>


		<!-- 结束流程 -->
		<sequenceFlow id='endFlow' sourceRef='checkShipSparePartsTask' targetRef='theEnd' />
		<endEvent id="theEnd" />

	</process>

</definitions>